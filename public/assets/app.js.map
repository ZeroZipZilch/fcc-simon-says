{"version":3,"sources":["webpack:///webpack/bootstrap 0fab752a2f367266d2aa","webpack:///./src/javascript/utils.js","webpack:///./src/javascript/app.js","webpack:///./src/javascript/game.js","webpack:///./src/javascript/animate.js","webpack:///./src/scss/app.scss"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;ACNA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;AC/B4B;AAQ3B;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,+D;;;;;;;;AC3NkB;;AAElB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AAAA;AAAA;;;;;;;ACxEA,yC","file":"./public/assets/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0fab752a2f367266d2aa","export const element = (selector) => {\r\n    return document.querySelector(selector);\r\n}\r\n\r\nexport const elements = (selector) => {\r\n    return [...document.querySelectorAll(selector)];\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/javascript/utils.js\n// module id = 0\n// module chunks = 0","import Game from './game';\r\n\r\nconst colors = [\r\n    'green',\r\n    'red',\r\n    'blue',\r\n    'yellow',\r\n];\r\n\r\nwindow.onload = function() {\r\n    colors.map(color => {\r\n        fetch('/assets/images/cat-' + color + '.svg')\r\n            .then(response => response.text())\r\n            .then(svg => \r\n                document.querySelector('.cat-' + color + ' .cat')\r\n                    .insertAdjacentHTML('afterbegin', svg)\r\n            );\r\n    });\r\n\r\n    fetch('/assets/images/guillotine.svg')\r\n    .then(response => response.text())\r\n    .then(svg => \r\n        [...document.querySelectorAll('.guillotine')]\r\n        .map(element => element.insertAdjacentHTML('afterbegin', svg))\r\n    );\r\n    \r\n    new Game();\r\n}\r\n\r\nArray.prototype.peek = function() {\r\n    return this[this.length - 1];\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/javascript/app.js\n// module id = 2\n// module chunks = 0","import { element, elements } from './utils';\r\nimport { \r\n    transitionIdleToSay,\r\n    transitionSayToIdle,\r\n    sayToTransitionIdle,\r\n    transitionIdleToPress,\r\n    transitionPressToIdle,\r\n    pressToTransitionIdle,\r\n} from './animate';\r\n\r\nclass Game {\r\n    constructor() {\r\n        this.cats = ['green', 'red', 'blue', 'yellow'];\r\n\r\n        this.audio = true;\r\n        this.hardcore = false;\r\n\r\n        this.press = this.press.bind(this);\r\n\r\n        this.initStartGameListener();\r\n        this.initRetryListener();\r\n        this.initReplayListener();\r\n\r\n        this.initAudioToggle();\r\n        this.initHardcoreToggle();\r\n        this.initRestartListener();\r\n    }\r\n\r\n    playSequence(stack) {\r\n        if (stack.length) {\r\n            setTimeout(() => this.mew(stack.shift()), 1500);\r\n        }\r\n    }\r\n\r\n    initStartGameListener () {\r\n        element('.start-game-btn').addEventListener('click', () => {\r\n            element('.modal.start-game').classList.add('hidden');\r\n            this.start();\r\n        });\r\n    }\r\n\r\n    initRetryListener () {\r\n        element('.retry-btn').addEventListener('click', () => {\r\n            element('.modal.game-over').classList.add('hidden');\r\n            this.start();\r\n        });\r\n    }\r\n\r\n    initReplayListener () {\r\n        element('.replay-btn').addEventListener('click', () => {\r\n            element('.modal.winner').classList.add('hidden');\r\n            this.start();\r\n        });\r\n    }\r\n\r\n    start () {\r\n        this.sequence = [];\r\n        this.stack = [];\r\n        this.turn = [];\r\n\r\n        this.addToSequence();\r\n        this.stack = [...this.sequence];\r\n\r\n        setTimeout(() => this.playSequence(this.stack), 1000);\r\n    }\r\n\r\n    initRestartListener () {\r\n        element('.restart').addEventListener('click', () => {\r\n            this.restart();\r\n        });\r\n    }\r\n\r\n    initAudioToggle () {\r\n        elements('.audio').map(audioElement => {\r\n            audioElement.addEventListener('click', e => {\r\n                this.audio = !this.audio;\r\n                elements('.audio').map(element => element.classList.toggle('no-audio'));\r\n            })\r\n        });\r\n    }\r\n\r\n    initHardcoreToggle () {\r\n        element('.guillotine-btn').addEventListener('click', (e) => {\r\n            element('.guillotine').classList.add('on-top');\r\n            const classList = e.currentTarget.classList;\r\n            \r\n            this.restart();\r\n            \r\n            if (classList.contains('dropped')) {\r\n                this.hardcore = false;\r\n                classList.add('lifted');\r\n                classList.remove('droppped');\r\n                \r\n                Promise.resolve(\r\n                    setTimeout(() => {\r\n                        classList.remove('lifted');\r\n                        classList.remove('dropped');\r\n                    }, 500)\r\n                );\r\n            } else {\r\n                this.hardcore = true;\r\n                classList.add('dropped');\r\n            }\r\n            \r\n            setTimeout(() => element('.guillotine').classList.remove('on-top'), 1500);\r\n        })\r\n    }\r\n\r\n    mew (catIndex) {\r\n        const cat = '.cat-' + this.cats[catIndex] + ' .cat';\r\n        \r\n        element(cat).classList.remove('idle');\r\n        element(cat).classList.add('idle-to-say');\r\n\r\n        if (this.audio) {\r\n            let catSound = new Audio('/assets/sounds/' + catIndex + '.mp3');\r\n            catSound.play();\r\n        }\r\n\r\n        transitionIdleToSay(cat)\r\n        .then(() => sayToTransitionIdle(cat))\r\n        .then(() => transitionSayToIdle(cat));\r\n\r\n        if (this.stack.length) {\r\n            this.playSequence(this.stack);\r\n        } else {\r\n            setTimeout(() => this.initPressListener(), 500);\r\n        }\r\n    }\r\n\r\n    press (e) {\r\n        this.clearPressListener();\r\n        const catIndex = parseInt(e.currentTarget.dataset.index);\r\n        \r\n        const cat = '.cat-' + this.cats[catIndex] + ' .cat';\r\n\r\n        element(cat).classList.remove('idle');\r\n        element(cat).classList.add('idle-to-press');\r\n        \r\n        if (this.audio) {\r\n            let simonSound = new Audio('/assets/sounds/simonSound' + (parseInt(catIndex) + 1) + '.mp3');\r\n            setTimeout(() => simonSound.play(), 500);\r\n        }\r\n        \r\n        if (this.sequence[this.turn.length] === catIndex) {\r\n            this.turn.push(catIndex);\r\n\r\n            if (this.turn.length === this.sequence.length) {\r\n\r\n                if (this.sequence.length === 20) {\r\n                    element('.winner').classList.remove('hidden');\r\n                } else {\r\n                    this.addToSequence();\r\n                    this.turn = [];\r\n\r\n                    setTimeout(() => {\r\n                        this.stack = [...this.sequence];\r\n                        this.playSequence(this.stack);\r\n                    }, 1500);\r\n                }\r\n            } else {\r\n                setTimeout(() => this.initPressListener(), 500);\r\n            }\r\n        } else {\r\n            if (this.hardcore) {\r\n                this.gameOver();\r\n            } else {\r\n                setTimeout(() => {\r\n                    this.turn = [];\r\n                    this.stack = [...this.sequence];\r\n                    this.playSequence(this.stack);\r\n                }, 1500);\r\n            }\r\n        }\r\n\r\n        transitionIdleToPress(cat)\r\n        .then(() => pressToTransitionIdle(cat))\r\n        .then(() => transitionPressToIdle(cat));\r\n    }\r\n\r\n    addToSequence () {\r\n        let cat = Math.floor(Math.random() * 4);\r\n\r\n        while (cat === this.sequence.peek()) {\r\n            cat = Math.floor(Math.random() * 4);\r\n        }\r\n\r\n        this.sequence.push(cat);\r\n        element('.score').innerHTML = this.sequence.length;\r\n    }\r\n\r\n    restart () {\r\n        this.audio = false;\r\n        element('.restarting').classList.remove('hidden');\r\n        this.start();\r\n        setTimeout(() => {\r\n            element('.restarting').classList.add('hidden');\r\n            this.audio = true;\r\n        }, 1500);\r\n    }\r\n\r\n    gameOver () {\r\n        this.sequence = [];\r\n        element('.game-over').classList.remove('hidden');\r\n    }\r\n\r\n    initPressListener() {\r\n        elements('.cat').map(element => {\r\n            element.addEventListener( 'click', this.press)\r\n        });\r\n    }\r\n\r\n    clearPressListener () {\r\n        elements('.cat').map(element => {\r\n            element.removeEventListener('click', this.press);\r\n        });\r\n    }\r\n}\r\n\r\nexport default Game;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/javascript/game.js\n// module id = 3\n// module chunks = 0","import { element } from './utils';\r\n\r\n/**\r\n * Say animations\r\n */\r\nexport const transitionIdleToSay = function (cat) {\r\n    element(cat).classList.remove('idle');\r\n    element(cat).classList.add('idle-to-say');\r\n\r\n    return new Promise((res, rej) => {\r\n        setTimeout(() => {\r\n            element(cat).classList.remove('idle-to-say');\r\n            element(cat).classList.add('say');\r\n            res();\r\n        }, 500);\r\n    });\r\n}\r\n\r\nexport const sayToTransitionIdle = function (cat) {\r\n    return new Promise((res, rej) => {\r\n        setTimeout(() => {\r\n            element(cat).classList.remove('say');\r\n            element(cat).classList.add('say-to-idle');\r\n            res();\r\n        }, 1000);\r\n    });\r\n}\r\n\r\nexport const transitionSayToIdle = function (cat) {\r\n    return new Promise((res, rej) => {\r\n        setTimeout(() => {\r\n            element(cat).classList.remove('say-to-idle');\r\n            element(cat).classList.add('idle');\r\n            res();\r\n        }, 500);\r\n    });\r\n}\r\n\r\n/**\r\n * Press animations\r\n */\r\nexport const transitionIdleToPress = function (cat) {\r\n    element(cat).classList.remove('idle');\r\n    element(cat).classList.add('idle-to-press');\r\n\r\n    return new Promise((res, rej) => {\r\n        setTimeout(() => {\r\n            element(cat).classList.remove('idle-to-press');\r\n            element(cat).classList.add('press');\r\n            res();\r\n        }, 500);\r\n    });\r\n}\r\n\r\nexport const pressToTransitionIdle = function (cat) {\r\n    return new Promise((res, rej) => {\r\n        setTimeout(() => {\r\n            element(cat).classList.remove('press');\r\n            element(cat).classList.add('press-to-idle');\r\n            res();\r\n        }, 1000);\r\n    });\r\n}\r\n\r\nexport const transitionPressToIdle = function (cat) {\r\n    return new Promise((res, rej) => {\r\n        setTimeout(() => {\r\n            element(cat).classList.remove('press-to-idle');\r\n            element(cat).classList.add('idle');\r\n            res();\r\n        }, 500);\r\n    });\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/javascript/animate.js\n// module id = 4\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/app.scss\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}